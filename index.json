[{"categories":["技术"],"content":"https://github.com/Purfview/whisper-standalone-win## 为什么会想做这个项目 最近在听网课，有些老师的这个发音是相当有特色啊，声音开大了吵我耳朵，声音小了，不知道在说什么，相当恼火！于是乎打算生成一下字幕 ","date":"2025-07-23","objectID":"/whisper-%E5%BE%AE%E8%B0%83%E7%BB%8F%E5%8E%86/:0:0","tags":["whisper","Fine-tune"],"title":"whisper 微调经历","uri":"/whisper-%E5%BE%AE%E8%B0%83%E7%BB%8F%E5%8E%86/"},{"categories":["技术"],"content":"模型选择 目前市面上较火的开源模型有：阿里出品的FunASR和SenseVoice，缺点就是large size的模型并未开源，开源的仅有small模型，并不能跟whisper-large-v3-turbo类似的参数相对更大的模型相提并论 ","date":"2025-07-23","objectID":"/whisper-%E5%BE%AE%E8%B0%83%E7%BB%8F%E5%8E%86/:1:0","tags":["whisper","Fine-tune"],"title":"whisper 微调经历","uri":"/whisper-%E5%BE%AE%E8%B0%83%E7%BB%8F%E5%8E%86/"},{"categories":["技术"],"content":"模型推理 Windows平台：推荐whisper-standalone-win ，是已经打包好的独立可执行文件 其他平台：faster-whisper ","date":"2025-07-23","objectID":"/whisper-%E5%BE%AE%E8%B0%83%E7%BB%8F%E5%8E%86/:2:0","tags":["whisper","Fine-tune"],"title":"whisper 微调经历","uri":"/whisper-%E5%BE%AE%E8%B0%83%E7%BB%8F%E5%8E%86/"},{"categories":["技术"],"content":"模型训练 使用项目 Whisper-Finetune，这是一个微调Whisper语音识别模型和加速推理的项目 ","date":"2025-07-23","objectID":"/whisper-%E5%BE%AE%E8%B0%83%E7%BB%8F%E5%8E%86/:3:0","tags":["whisper","Fine-tune"],"title":"whisper 微调经历","uri":"/whisper-%E5%BE%AE%E8%B0%83%E7%BB%8F%E5%8E%86/"},{"categories":["技术"],"content":"训练环境 CPU Intel i5-14600KF 显卡 NVIDIA RTX 2080 Ti 22g 内存 64g 系统版本 Windows 11 24h2 python版本 Python 3.13.5 ","date":"2025-07-23","objectID":"/whisper-%E5%BE%AE%E8%B0%83%E7%BB%8F%E5%8E%86/:3:1","tags":["whisper","Fine-tune"],"title":"whisper 微调经历","uri":"/whisper-%E5%BE%AE%E8%B0%83%E7%BB%8F%E5%8E%86/"},{"categories":["技术"],"content":"安装环境 建议使用 conda 安装 python 环境Installing Miniconda - Anaconda 安装所需的依赖 python -m pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple pip3 install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu128 ","date":"2025-07-23","objectID":"/whisper-%E5%BE%AE%E8%B0%83%E7%BB%8F%E5%8E%86/:3:2","tags":["whisper","Fine-tune"],"title":"whisper 微调经历","uri":"/whisper-%E5%BE%AE%E8%B0%83%E7%BB%8F%E5%8E%86/"},{"categories":["技术"],"content":"准备数据 参考此处，教程中使用的数据集链接为 data_aishell.tgz​，建议使用 IDM 通过代理下载，下载完成后放入Whisper-Finetune\\dataset中 运行aishell.py生成如下列格式的训练集和测试集，可选参数 --add_pun=true 添加标点符 %% 需要下载 cn-en-common-vocab471067-large模型，并安装modelscope[audio] %% { \"audio\": { \"path\": \"dataset/0.wav\" }, \"sentence\": \"近几年，不但我用书给女儿压岁，也劝说亲朋不要给女儿压岁钱，而改送压岁书。\", \"language\": \"Chinese\", \"sentences\": [ { \"start\": 0, \"end\": 1.4, \"text\": \"近几年，\" }, { \"start\": 1.42, \"end\": 8.4, \"text\": \"不但我用书给女儿压岁，也劝说亲朋不要给女儿压岁钱，而改送压岁书。\" } ], \"duration\": 7.37 } ","date":"2025-07-23","objectID":"/whisper-%E5%BE%AE%E8%B0%83%E7%BB%8F%E5%8E%86/:3:3","tags":["whisper","Fine-tune"],"title":"whisper 微调经历","uri":"/whisper-%E5%BE%AE%E8%B0%83%E7%BB%8F%E5%8E%86/"},{"categories":["技术"],"content":"微调模型 训练命令如下： python finetune.py --base_model=openai/whisper-large-v3-turbo --output_dir=output/ 作者推荐参数为： python finetune.py --base_model=openai/whisper-large-v3-turbo --output_dir=output/ --gradient_accumulation_steps=16 --per_device_train_batch_size=4 --per_device_eval_batch_size=4 --use_compile=true --gradient_accumulation_steps=16 梯度累积步数 16 --per_device_train_batch_size=4 训练的batch size 4 --per_device_eval_batch_size=4 评估的batch size 4 --use_compile=true 使用Pytorch2.0的编译器 ","date":"2025-07-23","objectID":"/whisper-%E5%BE%AE%E8%B0%83%E7%BB%8F%E5%8E%86/:3:4","tags":["whisper","Fine-tune"],"title":"whisper 微调经历","uri":"/whisper-%E5%BE%AE%E8%B0%83%E7%BB%8F%E5%8E%86/"},{"categories":["技术"],"content":"合并模型 python merge_lora.py --lora_model=output/whisper-large-v3-turbo/checkpoint-best/ --output_dir=models/ ","date":"2025-07-23","objectID":"/whisper-%E5%BE%AE%E8%B0%83%E7%BB%8F%E5%8E%86/:3:5","tags":["whisper","Fine-tune"],"title":"whisper 微调经历","uri":"/whisper-%E5%BE%AE%E8%B0%83%E7%BB%8F%E5%8E%86/"},{"categories":["技术"],"content":"使用Ctranslate2格式模型预测 ct2-transformers-converter --model models/whisper-large-v3-turbo-finetune --output_dir models/whisper-large-v3-turbo-finetune-ct2 --copy_files tokenizer.json preprocessor_config.json --quantization float16 ","date":"2025-07-23","objectID":"/whisper-%E5%BE%AE%E8%B0%83%E7%BB%8F%E5%8E%86/:3:6","tags":["whisper","Fine-tune"],"title":"whisper 微调经历","uri":"/whisper-%E5%BE%AE%E8%B0%83%E7%BB%8F%E5%8E%86/"},{"categories":["技术"],"content":"1. hugo 本地构建 参考文献主题文档 - 基本概念 - LoveIt ","date":"2025-06-27","objectID":"/obsidian-hugo-github-cloudflare%E5%B7%A5%E4%BD%9C%E6%B5%81/:1:0","tags":["blog","hugo","themes"],"title":"Obsidian+Hugo+github+cloudflare 工作流","uri":"/obsidian-hugo-github-cloudflare%E5%B7%A5%E4%BD%9C%E6%B5%81/"},{"categories":["技术"],"content":"1.1 hugo 安装 因为我是 macOS，所以使用 brew install hugo brew 安装 /bin/bash -c \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)\" 或使用清华源homebrew进行安装 ","date":"2025-06-27","objectID":"/obsidian-hugo-github-cloudflare%E5%B7%A5%E4%BD%9C%E6%B5%81/:1:1","tags":["blog","hugo","themes"],"title":"Obsidian+Hugo+github+cloudflare 工作流","uri":"/obsidian-hugo-github-cloudflare%E5%B7%A5%E4%BD%9C%E6%B5%81/"},{"categories":["技术"],"content":"1.2 创建项目 hugo new site my_website cd my_website 此处my_website为项目名称 ","date":"2025-06-27","objectID":"/obsidian-hugo-github-cloudflare%E5%B7%A5%E4%BD%9C%E6%B5%81/:1:2","tags":["blog","hugo","themes"],"title":"Obsidian+Hugo+github+cloudflare 工作流","uri":"/obsidian-hugo-github-cloudflare%E5%B7%A5%E4%BD%9C%E6%B5%81/"},{"categories":["技术"],"content":"1.3 安装主题 我使用的主题为GitHub - dillonzq/LoveIt 为了后期便于上传 github，所以此处要将你的项目初始化为 git 仓库, 并且把主题仓库作为你的网站目录的子模块: git init git submodule add https://github.com/dillonzq/LoveIt.git themes/LoveIt -b v0.3.0 此处指定分支为 v0.3.0 截止于 2025 年 6 月 28 日为目前最新稳定版本，主线版本可能需要指定 hugo 版本为 0.145.0 . 1.3.1 使用示例文件 将项目中 themes/LoveIt/exampleSite 中的所有文件复制到项目文件夹中。 ","date":"2025-06-27","objectID":"/obsidian-hugo-github-cloudflare%E5%B7%A5%E4%BD%9C%E6%B5%81/:1:3","tags":["blog","hugo","themes"],"title":"Obsidian+Hugo+github+cloudflare 工作流","uri":"/obsidian-hugo-github-cloudflare%E5%B7%A5%E4%BD%9C%E6%B5%81/"},{"categories":["技术"],"content":"1.4 在本地启动网站 使用以下命令启动网站: hugo serve 在 http://localhost:1313 中就能查看你的项目.如果需要修改内容，请在 content/posts 和 hugo.toml 中修改,具体修改办法详情主题文档 - 基本概念 - LoveIt ","date":"2025-06-27","objectID":"/obsidian-hugo-github-cloudflare%E5%B7%A5%E4%BD%9C%E6%B5%81/:1:4","tags":["blog","hugo","themes"],"title":"Obsidian+Hugo+github+cloudflare 工作流","uri":"/obsidian-hugo-github-cloudflare%E5%B7%A5%E4%BD%9C%E6%B5%81/"},{"categories":["技术"],"content":"2. 上传项目至github 两种上传方案，一种是使用 github desktop 客户端上传整个项目，第二种是 github 中新建项目,然后在本地项目文件夹中打开命令行输入： git remote add origin https://github.com/{用户名}/{项目名}.git git add . git commit -m \"first commit\" git branch -M main git push -u origin main ","date":"2025-06-27","objectID":"/obsidian-hugo-github-cloudflare%E5%B7%A5%E4%BD%9C%E6%B5%81/:2:0","tags":["blog","hugo","themes"],"title":"Obsidian+Hugo+github+cloudflare 工作流","uri":"/obsidian-hugo-github-cloudflare%E5%B7%A5%E4%BD%9C%E6%B5%81/"},{"categories":["技术"],"content":"3. github action 自动更新 在 .github/workflows 中中创建一个 hugo.yml，内容如下： name: GitHub Pages on: push: 分支: - main # Set a branch to deploy pull_request: jobs: deploy: runs-on: ubuntu-latest concurrency: group: ${{ github.workflow }}-${{ github.ref }} steps: - uses: actions/checkout@v4 with: submodules: true # Fetch Hugo themes (true OR recursive) fetch-depth: 0 # Fetch all history for .GitInfo and .Lastmod - name: Setup Hugo uses: peaceiris/actions-hugo@v3 with: hugo-version: '0.145.0' extended: true - run: git pull - name: Build run: hugo --minify - run: | git config user.name \"github-actions[bot]\" git config user.email \"41898282+github-actions[bot]@users.noreply.github.com\" git add ./public git commit -m \"generated\" git push - name: Deploy uses: peaceiris/actions-gh-pages@v3 if: github.ref == 'refs/heads/main' with: github_token: ${{ secrets.GITHUB_TOKEN }} publish_dir: ./public 然后在项目设置中找到 action 项，选择通用，划到最下方工作流权限并给予读写权限。 好了，现在修改main中的文件便会触发博客的自动更新。 ","date":"2025-06-27","objectID":"/obsidian-hugo-github-cloudflare%E5%B7%A5%E4%BD%9C%E6%B5%81/:3:0","tags":["blog","hugo","themes"],"title":"Obsidian+Hugo+github+cloudflare 工作流","uri":"/obsidian-hugo-github-cloudflare%E5%B7%A5%E4%BD%9C%E6%B5%81/"},{"categories":["技术"],"content":"4. 上传cloudflare 在登录 cloudflare Cloudflare Dashboard | Manage Your Account后选择 Workers 点击创建；选择导入现有 git 仓库，选择刚才创建的仓库，下一步，然后将构建设置中的根目录设置为public,即可完成部署。 如果自己有域名的可在自定义域中添加自己的域名。 ","date":"2025-06-27","objectID":"/obsidian-hugo-github-cloudflare%E5%B7%A5%E4%BD%9C%E6%B5%81/:4:0","tags":["blog","hugo","themes"],"title":"Obsidian+Hugo+github+cloudflare 工作流","uri":"/obsidian-hugo-github-cloudflare%E5%B7%A5%E4%BD%9C%E6%B5%81/"},{"categories":["技术"],"content":"番外：快速构建博客 参考来源使用Obsidian优雅地写Hugo博客文章 | 梓言堂 - Yuk’s Blog 使用到以下插件： Enveloppe Remotely Save Templater Auto Link Title Image Converter auto upload image with picgo 参考资料： ","date":"2025-06-27","objectID":"/obsidian-hugo-github-cloudflare%E5%B7%A5%E4%BD%9C%E6%B5%81/:5:0","tags":["blog","hugo","themes"],"title":"Obsidian+Hugo+github+cloudflare 工作流","uri":"/obsidian-hugo-github-cloudflare%E5%B7%A5%E4%BD%9C%E6%B5%81/"},{"categories":null,"content":"关于 LoveIt","date":"2019-08-02","objectID":"/about/","tags":null,"title":"关于 LoveIt","uri":"/about/"},{"categories":null,"content":"  LoveIt 是一个由  Dillon 开发的简洁、优雅且高效的 Hugo 博客主题。 它的原型基于 LeaveIt 主题 和 KeepIt 主题。 Hugo 主题 LoveIt ","date":"2019-08-02","objectID":"/about/:0:0","tags":null,"title":"关于 LoveIt","uri":"/about/"},{"categories":null,"content":"特性 ","date":"2019-08-02","objectID":"/about/:1:0","tags":null,"title":"关于 LoveIt","uri":"/about/"},{"categories":null,"content":"性能和 SEO  性能优化：在 Google PageSpeed Insights 中， 99/100 的移动设备得分和 100/100 的桌面设备得分  使用基于 JSON-LD 格式 的 SEO SCHEMA 文件进行 SEO 优化  支持 Google Analytics  支持 Fathom Analytics  支持 Plausible Analytics  支持 Yandex Metrica  支持搜索引擎的网站验证 (Google, Bind, Yandex 和 Baidu)  支持所有第三方库的 CDN  基于 lazysizes 自动转换图片为懒加载 ","date":"2019-08-02","objectID":"/about/:1:1","tags":null,"title":"关于 LoveIt","uri":"/about/"},{"categories":null,"content":"外观和布局  桌面端/移动端 响应式布局  浅色/深色 主题模式  全局一致的设计语言  支持分页  易用和自动展开的文章目录  支持多语言和国际化  美观的 CSS 动画 社交和评论系统  支持 Gravatar 头像  支持本地头像  支持多达 81 种社交链接  支持多达 27 种网站分享  支持 Disqus 评论系统  支持 Gitalk 评论系统  支持 Valine 评论系统  支持 Facebook comments 评论系统  支持 Telegram comments 评论系统  支持 Commento 评论系统  支持 utterances 评论系统  支持 giscus 评论系统 ","date":"2019-08-02","objectID":"/about/:1:2","tags":null,"title":"关于 LoveIt","uri":"/about/"},{"categories":null,"content":"扩展功能  支持基于 Lunr.js 或 algolia 的搜索  支持 Twemoji  支持代码高亮  一键复制代码到剪贴板  支持基于 lightGallery 的图片画廊  支持 Font Awesome 图标的扩展 Markdown 语法  支持上标注释的扩展 Markdown 语法  支持分数的扩展 Markdown 语法  支持基于 $\\KaTeX$ 的数学公式  支持基于 mermaid 的图表 shortcode  支持基于 ECharts 的交互式数据可视化 shortcode  支持基于 Mapbox GL JS 的 Mapbox shortcode  支持基于 APlayer 和 MetingJS 的音乐播放器 shortcode  支持 Bilibili 视频 shortcode  支持多种注释的 shortcode  支持自定义样式的 shortcode  支持自定义脚本的 shortcode  支持基于 TypeIt 的打字动画 shortcode  支持基于 cookieconsent 的 Cookie 许可横幅  支持人物标签的 shortcode … ","date":"2019-08-02","objectID":"/about/:1:3","tags":null,"title":"关于 LoveIt","uri":"/about/"},{"categories":null,"content":"许可协议 LoveIt 根据 MIT 许可协议授权。 更多信息请查看 LICENSE 文件。 ","date":"2019-08-02","objectID":"/about/:2:0","tags":null,"title":"关于 LoveIt","uri":"/about/"},{"categories":null,"content":"特别感谢 LoveIt 主题中用到了以下项目，感谢它们的作者： modern-normalize Font Awesome Simple Icons Animate.css autocomplete Lunr.js algoliasearch lazysizes object-fit-images Twemoji emoji-data lightGallery clipboard.js Sharer.js TypeIt $\\KaTeX$ mermaid ECharts Mapbox GL JS APlayer MetingJS Gitalk Valine cookieconsent ","date":"2019-08-02","objectID":"/about/:3:0","tags":null,"title":"关于 LoveIt","uri":"/about/"}]